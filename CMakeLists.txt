# Usage example:
# 1) mkdir build && cd build
# 2) conan install .. --build=missing
# 3) cmake .. -DCMAKE_TOOLCHAIN_FILE=conan_toolchain.cmake -DCMAKE_BUILD_TYPE=Release
# 4) cmake --build .
# 5) ctest
# 6) cpack
cmake_minimum_required(VERSION 3.2)

# Project declarartion
project(ConanQt VERSION 0.0.1)

# Declaring main executable
add_executable(qt_test main.cpp)

# Declaring dependencies
# Files for find_package are generated by conan.
find_package(Qt5 REQUIRED)

# Setting basic properties for targets
set_target_properties(qt_test PROPERTIES
    CXX_STANDARD 17
    CXX_STANDARD_REQUIRED ON
)

# Path to include dirs
target_include_directories(qt_test
    PRIVATE "${CMAKE_BINARY_DIR}"
)

# Linking libraries to projects
target_link_libraries(qt_test PRIVATE
Qt5::Core
Qt5::Gui
Qt5::Widgets
)
# Function to set maximum warning level for compiler 
function(SetMaxWarning _project)
    if (MSVC)
        target_compile_options(${_project} PRIVATE
            /W4 /MD
    )
    else ()
        target_compile_options(${_project} PRIVATE
            -Wall -Wextra -pedantic -Werror
    )
    endif()
endfunction()

SetMaxWarning(qt_test)
